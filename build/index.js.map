{"version":3,"sources":["../src/index.js"],"names":["dbConfig","env","process","configApproved","hasOwnProperty","THUMBOR_KEY","console","log","THUMBOR_URL","exit","$","set","Thumbor","e","message"],"mappings":";;;;;;AAAA;;AACA;;;;;;kBAEe,YAAM;AACjB,QAAG;AACC,YAAIA,WAAW,EAAf;AACA,YAAIC,MAAMC,QAAQD,GAAlB;AACA,YAAIE,iBAAiB,IAArB;;AAEA,YAAGF,IAAIG,cAAJ,CAAmB,aAAnB,KAAqC,CAAC,CAACH,IAAII,WAA9C,EACIL,SAAS,aAAT,IAA0BC,IAAII,WAA9B,CADJ,KAEK;AACDF,6BAAiB,KAAjB;AACAG,oBAAQC,GAAR,CAAY,kEAAZ;AACH;;AAED,YAAGN,IAAIG,cAAJ,CAAmB,aAAnB,KAAqC,CAAC,CAACH,IAAIO,WAA9C,EACIR,SAAS,aAAT,IAA0BC,IAAIO,WAA9B,CADJ,KAEK;AACDL,6BAAiB,KAAjB;AACAG,oBAAQC,GAAR,CAAY,kEAAZ;AACH;;AAED,YAAG,CAACJ,cAAJ,EAAmB;AACfG,oBAAQC,GAAR,CAAY,kFAAZ;AACAL,oBAAQO,IAAR,CAAa,CAAC,CAAd;AACH,SAHD,MAIK;AACDC,qBAAEC,GAAF,CAAM,SAAN,EAAiB,IAAIC,iBAAJ,CAAYX,IAAII,WAAhB,EAA6BJ,IAAIO,WAAjC,CAAjB;AACH;AACJ,KA1BD,CA2BA,OAAOK,CAAP,EAAU;AACNP,gBAAQC,GAAR,0BAAmCM,EAAEC,OAArC,EAAgDD,CAAhD;AACH;AACJ,C","file":"index.js","sourcesContent":["import { $ } from \"@dekproject/scope\";\nimport Thumbor from 'thumbor';\n\nexport default () => {\n    try{\n        let dbConfig = {};\n        let env = process.env;\n        let configApproved = true;\n\n        if(env.hasOwnProperty(\"THUMBOR_KEY\") && !!env.THUMBOR_KEY)\n            dbConfig[\"THUMBOR_KEY\"] = env.THUMBOR_KEY;\n        else {\n            configApproved = false;\n            console.log(\"[ Thumbor ] - There is no THUMBOR_KEY variable in the .env file.\");\n        }\n\n        if(env.hasOwnProperty(\"THUMBOR_URL\") && !!env.THUMBOR_URL)\n            dbConfig[\"THUMBOR_URL\"] = env.THUMBOR_URL;\n        else {\n            configApproved = false;\n            console.log(\"[ Thumbor ] - There is no THUMBOR_URL variable in the .env file.\");\n        }\n\n        if(!configApproved){\n            console.log(\"[ Thumbor ] - Please correct the above errors before restarting the application.\");\n            process.exit(-1);\n        }\n        else {\n            $.set(\"thumbor\", new Thumbor(env.THUMBOR_KEY, env.THUMBOR_URL));\n        }\n    }\n    catch (e) {\n        console.log(`[ Elasticsearch ] - ${e.message}`, e);\n    }\n}\n"]}